---
layout: post
title: ğŸ›¸ Redux ìš©ì–´ì™€ ê°œë…
date: 2020-10-23 02:20:00
author: "SeWonKim"
categories: [WEB, React]
tags: [React, redux]
comments: true
description: ëŒ€ë§ì˜ redux...
---

# Redux?

> [Redux concept](https://ko.redux.js.org/tutorials/essentials/part-1-overview-concepts)

ìƒíƒœê´€ë¦¬ë¥¼ storeì—ì„œ ì „ì—­ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒ

ë³´í†µì˜ ì•±ì—ëŠ” í•˜ë‚˜ì˜ ë£¨íŠ¸ reducerí•©ìˆ˜ë¥¼ ê°€ì§„ í•˜ë‚˜ì˜ storeê°€ ìˆë‹¤.      
ì•±ì´ ì»¤ì§ì— ë”°ë¼ reducerë¥¼ ì‘ê²Œ ë‚˜ëˆˆë‹¤.

## ğŸ§¡Stroe

ëª¨ë“  ìƒíƒœëŠ” ì—¬ê¸°ì„œ ê´€ë¦¬ëœë‹¤.

Store ë‚´ì˜ stateëŠ” ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.    
í•­ìƒ Actionì„ ê±°ì³ì•¼ í•œë‹¤.

## ğŸ’›Action, ActionCreator

Storeì— ì ‘ê·¼í•˜ëŠ” ìœ ì¼í•œ ë°©ë²• = Action ë³´ë‚´ê¸°

![img](https://ko.redux.js.org/assets/images/one-way-data-flow-04fe46332c1ccb3497ecb04b94e55b97.png)

ê¸°ë³¸ í¬ë§·

```javascript
{
    type: Actionì˜ ì´ë¦„
    payload: Action ì‹¤í–‰ì— í•„ìš”í•œ ë°ì´í„°
}

const addTodoAction = {
  type: 'todos/todoAdded',
  payload: 'Buy milk'
}
```

ActionCreatorëŠ” action objectë¥¼ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤.    
Action ì‹¤í–‰ì— í•„ìš”í•œ ë°ì´í„°ê°€ ë‹¬ë¼ì§€ë‹ˆê¹Œ ë§¤ë²ˆ Action í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ì§€ ì•Šì•„ë„ ë˜ê²Œ í•´ì¤€ë‹¤.

```javascript
const addTodo = text => {
  return {
    type: 'todos/todoAdded',
    payload: text
  }
}
```

## ğŸ’šReducer

Actionì´ stateë¥¼ ì–´ë–»ê²Œ ë³€ê²½í• ì§€ ëª…ì‹œí•˜ê¸° ìœ„í•´ reducer í•¨ìˆ˜ ì‘ì„±

ì´ì „ stateì™€ Actionì„ í•©ì³ ìƒˆë¡œìš´ stateë¥¼ ë§Œë“¤ì–´ë‚¸ë‹¤.      
`(state, action) => newState`


```javascript
const initialState = { value: 0 }

function counterReducer(state = initialState, action) {
    
  if (action.type === 'counter/increment') {
    return {
      ...state, // ê¸°ì¡´ì˜ state ë³µì‚¬
      
      value: state.value + 1    // ê¸°ì¡´ì˜ stateì— actionì„ ë”í•´ì„œ
    }
  }
  return state  // ìƒˆë¡œìš´ state ë°˜í™˜!
}
```

### ì´ëŸ°ì‹ìœ¼ë¡œ ì‘ë™ ë˜ëŠ” ê²ƒì´ë‹¤...!

![img](https://ko.redux.js.org/assets/images/ReduxDataFlowDiagram-49fa8c3968371d9ef6f2a1486bd40a26.gif)



## ğŸ’™Componentì— ì—°ê²°í•˜ê¸°

reudxì—ì„œ ì œê³µí•˜ëŠ” `connect`ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ reduxë¥¼ react ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

1. componentê°€ storeë¡œë¶€í„° ì •ë³´ë¥¼ ë°›ì„ ë•Œ propsë¡œ ë°›ëŠ”ë‹¤.
2. propsëŠ” immutableí•˜ë‹¤. ë”°ë¼ì„œ, ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ componentê°€ ìƒì„±ëœë‹¤.
3. mapStateToPropsëŠ” storeì˜ stateë¥¼ propsì— ì–´ë–»ê²Œ ì—°ê²°í• ì§€ ì •í•œë‹¤. `store ğŸ‘‰ props`
4. mapDispatchToPropsëŠ” actionì„ ì•Œë¦¬ëŠ” í•¨ìˆ˜ dispatchë¥¼ ì–´ë–»ê²Œ propsì— ì—°ê²°í• ì§€ ì •í•œë‹¤. `action ğŸ‘‰ props`
5. 3, 4ë²ˆì´ ì ìš©ëœ propsë¥¼ ë°›ì„ componentë¥¼ ì •í•œë‹¤.
6. storeì™€ reducerë¥¼ ì—°ê²°í•  ìˆ˜ ìˆë„ë¡ ë§Œë“  componentê°€ ë°˜í™˜ëœë‹¤.

### class component
```javascript
import React, { Component } from 'react';
import { connect } from 'react-redux';
import { addValue } from './actions';
â€‹
class Counter extends Component {
    render() {
        const { value, dispatchAddValue } = this.props;
        return (
            <div>
                Value: {value}
                <a href="#" onClick={e => dispatchAddValue(1)}>+1</a>
                <a href="#" onClick={e => dispatchAddValue(2)}>+2</a>
            </div>
        );
    }
}
â€‹
export default connect(
    state => ({ value: state.value }),
    dispatch => ({ dispatchAddValue: amount => dispatch(addValue(amount)) })
)(Counter)
```

### functional component
```javascript
import React, { Component } from 'react';
import { connect } from 'react-redux';
import { addValue } from './actions';
â€‹
const Counter = ({ value, dispatchAddValue }) => (
    <div>
        Value: {value}
        <a href="#" onClick={e => dispatchAddValue(1)}>+1</a>
        <a href="#" onClick={e => dispatchAddValue(2)}>+2</a>
    </div>
);
â€‹
export default connect(
    state => ({ value: state.value }),
    dispatch => ({ dispatchAddValue: amount => dispatch(addValue(amount)) })
)(Counter)

```

`dispatch => bindActionCreators({ addValue }, dispatch)` ì´ëŸ°ì‹ìœ¼ë¡œ bindActionCreatorsë¥¼ ì‚¬ìš©í•˜ë©´    
mapDispatchToPropsë¥¼ ê°„ì†Œí•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
