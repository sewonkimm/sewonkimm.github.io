---
layout: post
title: ë°±ì¤€ 17143:ë‚šì‹œì™•
date: 2020-12-19 16:50:00
author: 'SeWonKim'
categories: [CS, Algorithm]
tags: [ì•Œê³ ë¦¬ì¦˜,  BOJ]
comments: true
description: Baekjoon 17143
---

> [Baekjoon 17143](https://www.acmicpc.net/problem/17143)

## Idea

### ğŸ¥šë³€ìˆ˜

- int R, C : ê²©ìíŒì˜ ì„¸ë¡œ, ê°€ë¡œ í¬ê¸°
- int M : ìƒì–´ì˜ ìˆ˜
- int sum : ë‚šì‹œì™•ì´ ì¡ì€ ìƒì–´ í¬ê¸°ì˜ í•©
- int[5][2] d : ë°©í–¥ { {}, {-1, 0}, {1, 0}, {0, 1}, {0, -1} } ìƒí•˜ìš°ì¢Œ
- class Shark : int pos(ìœ„ì¹˜), size(í¬ê¸°), vel(ì†ë„), dir(ë°©í–¥)
- - Shark[R+1][c+1] map
- ArrayList<Shark> list : ìƒì–´ ë¦¬ìŠ¤íŠ¸

### ğŸ³í’€ì´ ì „ëµ

1. ë‚šì‹œì™• ì˜¤ë¥¸ìª½ìœ¼ë¡œ í•œ ì¹¸ ì´ë™
2. ë‚šì‹œì™•ì´ ìˆëŠ” ì—´ì—ì„œ ê°€ì¥ ë•…ê³¼ ê°€ê¹Œìš´ ìƒì–´ ì‚¬ëƒ¥ ğŸ‘‰ ì‚¬ëƒ¥í•œ ìƒì–´ mapì—ì„œ ì‚­ì œ
3. ë‚¨ì€ ìƒì–´ ì´ë™(ìƒì–´ê°€ ì´ë™ì„ ë§ˆì¹œ í›„ì— í•œ ì¹¸ì— ìƒì–´ê°€ ë‘ ë§ˆë¦¬ ì´ìƒ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ mapì— ë°˜ì˜í•˜ì§€ ì•Šê³  í•œêº¼ë²ˆì— ê°±ì‹ )

```
for( ë‚šì‹œì™•ì˜ ìœ„ì¹˜ 1 ~ C) {

    1. ë‚šì‹œ
    for(i = 1 ~ R) {
        mapì— ìƒì–´ê°€ ìˆìœ¼ë©´ sum += ìƒì–´ í¬ê¸°
        mapì— ìƒì–´ ì§€ìš°ê¸°
        break
    }

    map 2ì¤‘ forë¬¸ ëŒë©´ì„œ list ë§Œë“¤ì–´ ì£¼ê¸°

    2. ìƒì–´ ì´ë™â­
        2-1. for(0~list.size){
            for(0 ~ vel-1){
                ì´ë™
                if(ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë©´){
                    ë°©í–¥ì „í™˜ í›„ ì´ë™
                }
            }
        }
        2-2. sort(list)
        2-3. í•œ ì¹¸ì— 2ë§ˆë¦¬ ì´ìƒ ìƒì–´ê°€ ìˆìœ¼ë©´ ê°€ì¥ í° ìƒì–´ë§Œ ë‚¨ê¹€
        2-4. map ê°±ì‹ 
}
```

&nbsp;  
&nbsp;

<details>
<summary>code - í‹€ë ¸ìŠµë‹ˆë‹¤</summary>
<div markdown="1">

- ìƒê°í•œ ë¡œì§ëŒ€ë¡œ ì½”ë“œë¥¼ ì§°ê³ 
- ArrayListë¥¼ ì‚¬ìš©í•´ì„œ listë¥¼ êµ¬í˜„í•´ì„œ ì˜ˆì œë¥¼ í†µê³¼í–ˆìœ¼ë‚˜ ì œì¶œê²°ê³¼ê°€ í‹€ë ¸ë‹¤.

```java
import java.io.*;
import java.util.*;

public class Main {

	private static class Shark {
		int pos, vel, dir, size;
		public Shark(int pos, int vel, int dir, int size) {
			this.pos = pos;		// linearí•˜ê²Œ ë³€ê²½
			this.vel = vel;
			this.dir = dir;
			this.size = size;
		}
	}

	static int R, C, sum;
	static Shark[][] map;
	static int[][] dir =  { {}, {-1, 0}, {1, 0}, {0, 1}, {0, -1} };
	public static void main(String[] args) throws Exception {
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		StringTokenizer st = new StringTokenizer(br.readLine(), " ");
		R = Integer.parseInt(st.nextToken());
		C = Integer.parseInt(st.nextToken());
		int M = Integer.parseInt(st.nextToken());
		map = new Shark[R+1][C+1];
		for (int i = 0; i < M; i++) {
			st = new StringTokenizer(br.readLine(), " ");
			int r = Integer.parseInt(st.nextToken());
			int c = Integer.parseInt(st.nextToken());
			int vel = Integer.parseInt(st.nextToken());
			int dir = Integer.parseInt(st.nextToken());
			int size = Integer.parseInt(st.nextToken());
			map[r][c] = new Shark(C*(r-1) + c, vel, dir, size);
		}

		// ë‚šì‹œ ì‹œì‘
		ArrayList<Shark> list = new ArrayList<Shark>();
		for (int i = 1; i <= C; i++) {
			fishing(i);		// ë‚šì‹œ

			list.clear();
			getSharkInfo(list);	// ë‚¨ì€ ìƒì–´ë¡œ list ë§Œë“¤ê¸°

			if(list.size() > 0) {
				moveShark(list);	// ìƒì–´ ì´ë™
				writeMap(list);		// ì´ë™í•œ ê²ƒ mapì— ë°˜ì˜
			}
		}
		System.out.println(sum);
	}

	private static void writeMap(ArrayList<Shark> list) {
		// ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
		Collections.sort(list, new Comparator<Shark>() {
			@Override
			public int compare(Shark o1, Shark o2) {
				if(o1.pos == o2.pos) {	// ìœ„ì¹˜ê°€ ê°™ìœ¼ë©´ í¬ê¸° ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ
					return o1.size - o2.size;
				}
				return o1.pos - o2.pos;	// ìœ„ì¹˜ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ
			}
		});

		// mapì„ ì „ë¶€ ë¹„ì›Œì¤Œ
		for (int i = 1; i < R; i++) {
			Arrays.fill(map[i], null);
		}

		// mapê°±ì‹ 
		for (int i = 0; i < list.size()-1; i++) {
			if(list.get(i).pos != list.get(i+1).pos) {	// ìœ„ì¹˜ê°€ ê°™ìœ¼ë©´ í¬ê¸°ê°€ í° ê²ƒë§Œ ê°±ì‹ 
				int r = list.get(i).pos / C + 1;
				int c = list.get(i).pos % C;
				if(c == 0) {
					--r;
					c = C;
				}
				map[r][c] = list.get(i);
			}
		}

		int r = list.get(list.size()-1).pos / C + 1;
		int c = list.get(list.size()-1).pos % C;
		if(c == 0) {
			--r;
			c = C;
		}
		map[r][c] = list.get(list.size()-1);
	}

	private static void moveShark(ArrayList<Shark> list) {
		for (int i = 0; i < list.size(); i++) {	// ìƒì–´ í•˜ë‚˜í•˜ë‚˜ íƒìƒ‰
			int r = list.get(i).pos / C +1;		// lieanerí•œ ê²ƒì„ ì¢Œí‘œë¡œ ë³€ê²½
			int c = list.get(i).pos % C;
			if(c == 0) {	// ì˜ˆì™¸ì²˜ë¦¬
				--r;
				c = C;
			}
			int d = list.get(i).dir;

			for (int time = 0; time < list.get(i).vel; time++) {
				int nr = r + dir[d][0];
				int nc = c + dir[d][1];

				if(nr<=0 || nr>R || nc<=0 || nc>C) {	// ë²½ì— ë¶€ë”«íˆë©´
					d = turn(d);	// ë°©í–¥ì „í™˜
					r += dir[d][0];	// ìƒˆë¡œìš´ ë°©í–¥ìœ¼ë¡œ 1ë³´ ì „ì§„
					c += dir[d][1];
				}
				else {
					r = nr;
					c = nc;
				}
			}

			// list ê°±ì‹ 
			list.get(i).pos = C*(r-1) + c;
			list.get(i).dir = d;
		}
	}

	private static int turn(int d) {	// ë²½ì— ë¶€ë”«íˆë©´ ë°˜ëŒ€ë°©í–¥ìœ¼ë¡œ ì „í™˜
		if(d == 1)		return 2;
		else if(d == 2) return 1;
		else if(d == 3) return 4;
		else 			return 3;
	}

	private static void getSharkInfo(ArrayList<Shark> list) {
		for (int i = 1; i <= R; i++) {
			for (int j = 1; j <= C; j++) {
				if(map[i][j] != null) {
					list.add(map[i][j]);	// ìƒì–´ì •ë³´ listì— ì¶”ê°€
				}
			}
		}
	}

	private static void fishing(int i) {
		for (int r = 1; r <= R; r++) {	// ë•…ìœ¼ë¡œë¶€í„° ê°€ê¹Œìš´ê²ƒ ì‚¬ëƒ¥
			if(map[r][i] != null) {
				sum += map[r][i].size;	// ì¡ì€ ìƒì–´ì˜ í¬ê¸° í•©ì¹˜ê¸°
				map[r][i] = null;		// mapì—ì„œ ì¡ì€ ìƒì–´ ì‚­ì œ
				return;					// í•œë§ˆë¦¬ë§Œ ì¡ê³  ì¢…ë£Œ
			}
		}
	}

}

```

</div>
</details>

<details>
<summary>code - priority queueë¡œ ê°œì„ </summary>
<div markdown="1">

- array listë¥¼ priority queueë¡œ ê°œì„ í•´ë³´ì•˜ìœ¼ë‚˜ ê²°ê³¼ëŠ” ë™ì¼ ğŸ˜­

```java
import java.io.*;
import java.util.*;

public class Main {

	private static class Shark implements Comparable<Shark> {
		int pos, vel, dir, size;
		public Shark(int pos, int vel, int dir, int size) {
			this.pos = pos;		// linearí•˜ê²Œ ë³€ê²½
			this.vel = vel;
			this.dir = dir;
			this.size = size;
		}

		@Override
		public int compareTo(Shark o) {
			if(this.pos == o.pos) {	// ìœ„ì¹˜ê°€ ê°™ìœ¼ë©´ í¬ê¸° ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ
				return this.size - o.size;
			}
			return this.pos - o.pos;	// ìœ„ì¹˜ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ
		}
	}

	static int R, C, sum;
	static Shark[][] map;
	static int[][] dir =  { {}, {-1, 0}, {1, 0}, {0, 1}, {0, -1} };
	public static void main(String[] args) throws Exception {
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		StringTokenizer st = new StringTokenizer(br.readLine(), " ");
		R = Integer.parseInt(st.nextToken());
		C = Integer.parseInt(st.nextToken());
		int M = Integer.parseInt(st.nextToken());
		map = new Shark[R+1][C+1];
		for (int i = 0; i < M; i++) {
			st = new StringTokenizer(br.readLine(), " ");
			int r = Integer.parseInt(st.nextToken());
			int c = Integer.parseInt(st.nextToken());
			int vel = Integer.parseInt(st.nextToken());
			int dir = Integer.parseInt(st.nextToken());
			int size = Integer.parseInt(st.nextToken());
			map[r][c] = new Shark(C*(r-1) + c, vel, dir, size);
		}

		// ë‚šì‹œ ì‹œì‘
		PriorityQueue<Shark> list = new PriorityQueue<Shark>();
		for (int i = 1; i <= C; i++) {
			fishing(i);		// ë‚šì‹œ

			list.clear();
			getSharkInfo(list);	// ë‚¨ì€ ìƒì–´ë¡œ list ë§Œë“¤ê¸°

			if(list.size() > 0) {
				moveShark(list);	// ìƒì–´ ì´ë™
				writeMap(list);		// ì´ë™í•œ ê²ƒ mapì— ë°˜ì˜
			}
		}
		System.out.println(sum);
	}

	private static void writeMap(PriorityQueue<Shark> list) {

		// mapì„ ì „ë¶€ ë¹„ì›Œì¤Œ
		for (int i = 1; i < R; i++) {
			Arrays.fill(map[i], null);
		}

		// mapê°±ì‹ 
		Shark comp = list.poll();		// å‰
		while(!list.isEmpty()) {
			Shark now = list.poll();	// å¾Œ

			if(now.pos != comp.pos) {
				int r = comp.pos / C + 1;
				int c = comp.pos % C;
				if(c == 0) {
					--r;
					c = C;
				}
				map[r][c] = comp;
			}
			comp = now;
		}

		// ë§¨ ë§ˆì§€ë§‰ ìƒì–´ ë„£ì–´ì£¼ê¸°
		int r = comp.pos / C + 1;
		int c = comp.pos % C;
		if(c == 0) {
			--r;
			c = C;
		}
		map[r][c] = comp;
	}

	private static void moveShark(PriorityQueue<Shark> list) {
		PriorityQueue<Shark> tmpList = new PriorityQueue<Shark>();
		clone(tmpList, list);
		list.clear();

		while(!tmpList.isEmpty()) {
			Shark now = tmpList.poll();

			int r = now.pos / C +1;		// lieanerí•œ ê²ƒì„ ì¢Œí‘œë¡œ ë³€ê²½
			int c = now.pos % C;
			if(c == 0) {	// ì˜ˆì™¸ì²˜ë¦¬
				--r;
				c = C;
			}
			int d = now.dir;

			for (int time = 0; time < now.vel; time++) {
				int nr = r + dir[d][0];
				int nc = c + dir[d][1];

				if(nr<=0 || nr>R || nc<=0 || nc>C) {	// ë²½ì— ë¶€ë”«íˆë©´
					d = turn(d);	// ë°©í–¥ì „í™˜
					r += dir[d][0];	// ìƒˆë¡œìš´ ë°©í–¥ìœ¼ë¡œ 1ë³´ ì „ì§„
					c += dir[d][1];
				}
				else {
					r = nr;
					c = nc;
				}
			}

			// list ê°±ì‹ 
			list.add(new Shark(C*(r-1) + c, now.vel, d, now.size));
		}
	}

	private static void clone(PriorityQueue<Shark> tmpList, PriorityQueue<Shark> list) {
		Iterator<Shark> itr = list.iterator();
		while(itr.hasNext()) {
			tmpList.add(itr.next());
		}
	}

	private static int turn(int d) {	// ë²½ì— ë¶€ë”«íˆë©´ ë°˜ëŒ€ë°©í–¥ìœ¼ë¡œ ì „í™˜
		if(d == 1)		return 2;
		else if(d == 2) return 1;
		else if(d == 3) return 4;
		else 			return 3;
	}

	private static void getSharkInfo(PriorityQueue<Shark> list) {
		for (int i = 1; i <= R; i++) {
			for (int j = 1; j <= C; j++) {
				if(map[i][j] != null) {
					list.add(map[i][j]);	// ìƒì–´ì •ë³´ listì— ì¶”ê°€
				}
			}
		}
	}

	private static void fishing(int i) {
		for (int r = 1; r <= R; r++) {	// ë•…ìœ¼ë¡œë¶€í„° ê°€ê¹Œìš´ê²ƒ ì‚¬ëƒ¥
			if(map[r][i] != null) {
				sum += map[r][i].size;	// ì¡ì€ ìƒì–´ì˜ í¬ê¸° í•©ì¹˜ê¸°
				map[r][i] = null;		// mapì—ì„œ ì¡ì€ ìƒì–´ ì‚­ì œ
				return;					// í•œë§ˆë¦¬ë§Œ ì¡ê³  ì¢…ë£Œ
			}
		}
	}

}

```

</div>
</details>

&nbsp;  
&nbsp;

<details>
<summary>code - posë¥¼ ì¢Œí‘œë¡œ ê°œì„ </summary>
<div markdown="1">

- ìƒì–´ì˜ ìœ„ì¹˜ë¥¼ linearí•˜ê²Œ ë³€í™˜í•˜ëŠ” ë°ì—ì„œ ë¬¸ì œê°€ ìˆë‚˜? ë¼ëŠ” ìƒê°ì´ë“¤ì–´ ì¢Œí‘œë¡œ ë³€ê²½í•´ì£¼ì—ˆë‹¤.
- ì•Œê³ ë¦¬ì¦˜ ìŠ¤í„°ë””ë¥¼ í•˜ë©° ë‚´ ë¡œì§ì„ ì„¤ëª…í–ˆëŠ”ë° arrayë¥¼ êµ³ì´ ì •ë ¬í•  í•„ìš” ì—†ê³ , ê·¸ëƒ¥ ê°™ì€ ìë¦¬ì— ì´ë™í•œ ìƒì–´ê°€ ìˆìœ¼ë©´ í¬ê¸° ë¹„êµí•´ì„œ ë®ì–´ì”Œì›Œì£¼ë©´ ëœë‹¤ëŠ” ìƒê°ì´ ë“¤ì–´ì„œ ê·¸ë ‡ê²Œ ê°œì„ í•´ë³´ì•˜ë‹¤.
- í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ë„ ì˜ ë‚˜ì™€ì„œ ì œì¶œí–ˆëŠ”ë° ì œì¶œí•˜ìë§ˆì í‹€ë ¸ìŠµë‹ˆë‹¤ ğŸ˜­ğŸ˜­

```java
import java.io.*;
import java.util.*;

public class Main {

	private static class Shark {
		int r, c , vel, dir, size;
		public Shark(int r, int c, int vel, int dir, int size) {
			this.r = r;
			this.c = c;
			this.vel = vel;
			this.dir = dir;
			this.size = size;
		}
	}

	static int R, C, sum;
	static Shark[][] map;
	static int[][] dir =  { {}, {-1, 0}, {1, 0}, {0, 1}, {0, -1} };
	public static void main(String[] args) throws Exception {
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		StringTokenizer st = new StringTokenizer(br.readLine(), " ");
		R = Integer.parseInt(st.nextToken());
		C = Integer.parseInt(st.nextToken());
		int M = Integer.parseInt(st.nextToken());
		map = new Shark[R+1][C+1];
		for (int i = 0; i < M; i++) {
			st = new StringTokenizer(br.readLine(), " ");
			int r = Integer.parseInt(st.nextToken());
			int c = Integer.parseInt(st.nextToken());
			int vel = Integer.parseInt(st.nextToken());
			int dir = Integer.parseInt(st.nextToken());
			int size = Integer.parseInt(st.nextToken());
			map[r][c] = new Shark(r, c, vel, dir, size);
		}

		// ë‚šì‹œ ì‹œì‘
		ArrayList<Shark> list = new ArrayList<Shark>();
		for (int i = 1; i <= C; i++) {
			fishing(i);		// ë‚šì‹œ

			list.clear();
			getSharkInfo(list);	// ë‚¨ì€ ìƒì–´ë¡œ list ë§Œë“¤ê¸°

			if(list.size() > 0) {
				moveShark(list);	// ìƒì–´ ì´ë™
				writeMap(list);		// ì´ë™í•œ ê²ƒ mapì— ë°˜ì˜
			}
		}
		System.out.println(sum);
	}

	private static void writeMap(ArrayList<Shark> list) {

		// mapì„ ì „ë¶€ ë¹„ì›Œì¤Œ
		for (int i = 1; i < R; i++) {
			Arrays.fill(map[i], null);
		}

		// mapê°±ì‹ 
		for (int i = 0; i < list.size(); i++) {
			Shark now = list.get(i);
			if(map[now.r][now.c] != null) {
				if(map[now.r][now.c].size < now.size) {
					map[now.r][now.c] = now;
				}
			}
			else {
				map[now.r][now.c] = now;
			}
		}
	}

	private static void moveShark(ArrayList<Shark> list) {

		for (int i = 0; i < list.size(); i++) {
			Shark now = list.get(i);

			int r = now.r;
			int c = now.c;
			int d = now.dir;

			for (int time = 0; time < now.vel; time++) {
				int nr = r + dir[d][0];
				int nc = c + dir[d][1];

				if(nr<=0 || nr>R || nc<=0 || nc>C) {	// ë²½ì— ë¶€ë”«íˆë©´
					d = turn(d);	// ë°©í–¥ì „í™˜
					r += dir[d][0];	// ìƒˆë¡œìš´ ë°©í–¥ìœ¼ë¡œ 1ë³´ ì „ì§„
					c += dir[d][1];
				}
				else {
					r = nr;
					c = nc;
				}
			}

			now.r = r;
			now.c = c;
			now.dir = d;
		}
	}


	private static int turn(int d) {	// ë²½ì— ë¶€ë”«íˆë©´ ë°˜ëŒ€ë°©í–¥ìœ¼ë¡œ ì „í™˜
		if(d == 1)		return 2;
		else if(d == 2) return 1;
		else if(d == 3) return 4;
		else 			return 3;
	}

	private static void getSharkInfo(ArrayList<Shark> list) {
		for (int i = 1; i <= R; i++) {
			for (int j = 1; j <= C; j++) {
				if(map[i][j] != null) {
					list.add(map[i][j]);	// ìƒì–´ì •ë³´ listì— ì¶”ê°€
				}
			}
		}
	}

	private static void fishing(int i) {
		for (int r = 1; r <= R; r++) {	// ë•…ìœ¼ë¡œë¶€í„° ê°€ê¹Œìš´ê²ƒ ì‚¬ëƒ¥
			if(map[r][i] != null) {
				sum += map[r][i].size;	// ì¡ì€ ìƒì–´ì˜ í¬ê¸° í•©ì¹˜ê¸°
				map[r][i] = null;		// mapì—ì„œ ì¡ì€ ìƒì–´ ì‚­ì œ
				return;					// í•œë§ˆë¦¬ë§Œ ì¡ê³  ì¢…ë£Œ
			}
		}
	}

}

```

</div>
</details>

## Review

í—ˆê±± ğŸ™„

```java
// mapì„ ì „ë¶€ ë¹„ì›Œì¤Œ
for (int i = 1; i < R; i++) {
	Arrays.fill(map[i], null);
}
```

ë§µì„ ì „ë¶€ ë¹„ì›Œì£¼ëŠ” ê³¼ì •ì—ì„œ forë¬¸ì˜ ë²”ìœ„ë¥¼ ì˜ëª» ì„¤ì •í•´ì£¼ì–´ í‹€ë¦°ê²ƒì´ì—ˆë˜ ê²ƒì´ì—ˆë‹¤....  
`for (int i = 1; i <= R; i++)` ë¡œ ë°”ê¿”ì£¼ë‹ˆ í†µê³¼...!

ì•„ì•„... ì •ë§ ì‚¬ì†Œí•˜ë‹¤ ã… ã… 

&nbsp;  
&nbsp;
